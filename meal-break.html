<script>
  const isiPad = /iPad|Macintosh/.test(navigator.userAgent) && 'ontouchend' in document;
  if (isiPad) {
    document.getElementById("ipad-message").style.display = "block";
  }

  document.getElementById("uploadForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const fileInput = document.getElementById("pdfFile");
    const file = fileInput.files[0];
    const status = document.getElementById("status");

    if (!file) {
      status.textContent = "Please select a file before submitting.";
      status.style.color = "red";
      return;
    }

    const formData = new FormData();
    formData.append("file", file);

    try {
      const response = await fetch("https://default3afc8fb9498b4895ac67ceb1617a23.ce.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/f6e61e2496fc48e683947ae5bb0a782f/triggers/manual/paths/invoke/?api-version=1&tenantId=tId&environmentName=Default-3afc8fb9-498b-4895-ac67-ceb1617a23ce&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=_1q3BRY4Q2dWYee7EnSuGedo49eCK17deW1Bh0fTebo", {
        method: "POST",
        body: formData
      });

      if (response.ok) {
        status.textContent = "✅ Form submitted successfully!";
        status.style.color = "green";
        fileInput.value = "";
      } else {
        status.textContent = "❌ Error submitting form. Please try again.";
        status.style.color = "red";
      }
    } catch (error) {
      status.textContent = "❌ Submission failed. Check your connection.";
      status.style.color = "red";
    }
  });
</script>
